"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};
/*!
* abandon v1.0.2-alpha
* (c) 2007-2019 心叶 git+https://github.com/yelloxing/abandon.git
* License: MIT
*/!function(){var e=Object.prototype.toString;function t(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":e.call(t)}function n(e){var t=void 0===e?"undefined":_typeof(e);return null!=e&&("object"===t||"function"===t)}function o(e){if(!n(e))return!1;var o=t(e);return"[object Function]"===o||"[object AsyncFunction]"===o||"[object GeneratorFunction]"===o||"[object Proxy]"===o}var r=1;function i(e){if(null===e||"object"!==(void 0===e?"undefined":_typeof(e))||"[object Object]"!=t(e))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var n=e;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}function u(e){return null!==e&&"object"===(void 0===e?"undefined":_typeof(e))&&(1===e.nodeType||9===e.nodeType||11===e.nodeType)&&!i(e)}function a(e,t,n){window.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n,!1)}function c(e){var n=void 0===e?"undefined":_typeof(e);return"symbol"===n||"object"===n&&null!==e&&"[object Symbol]"===t(e)}function l(e,t){return Array.isArray(e)?e:function(e,t){if(Array.isArray(e))return!1;var n=void 0===e?"undefined":_typeof(e);return!("number"!=n&&"boolean"!=n&&null!=e&&!c(e))||(null!==t&&e in Object(t)||/^\w*$/.test(e))}(e,t)?[e]:function(e){return e.replace(/\[/g,".").replace(/\]/g,"").replace(/"/g,"").replace(/'/g,"").split(".")}(e)}var d=1/0;function f(e){if("string"==typeof e||c(e))return e;var t=""+e;return"0"===t&&1/e==-d?"-0":t}function p(e,t,n){var o=null==e?void 0:function(e,t){t=l(t,e);for(var n=0;n<t.length&&null!==e;n++)e=e[f(t[n])];return n&&n===t.length?e:void 0}(e,t);return void 0===o?n:o}function s(e,t,n){!function(e,t,n){"__proto__"==t?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}(e,t,n)}function v(e,t,o,r){return r="function"==typeof r?r:void 0,null==e?e:function(e,t,o,r){if(!n(e))return e;t=l(t,e);for(var i=e,u=0;u<t.length;u++){var a=f(t[u]),c=o;if(u+1!=t.length){var d=i[a];n(d)?c=d:void 0===(c=r?r(d,a,i):void 0)&&(c={})}s(i,a,c),i=i[a]}return e}(e,t,o,r)}function h(e){var n=void 0===e?"undefined":_typeof(e);return"string"===n||"object"===n&&null!=e&&!Array.isArray(e)&&"[object String]"===t(e)}function y(e,t,n){var o=document.createElement(e);if(/ui\-/.test(e.toLowerCase()))return{el:o,tagName:e.toLowerCase(),attrs:t,directive:[],textBind:[],event:[],component:[]};var r=[],i=[],u=[],a=[];for(var c in t=t||{})/^v-/.test(c)?r.push({el:o,name:c.replace("v-",""),value:t[c]}):/^@/.test(c)?i.push({el:o,name:c,value:t[c]}):o.setAttribute(c,t[c]);n=n||[];for(var l=0;l<n.length;l++){var d=n[l];if(h(d)){var f=d;d={el:document.createTextNode(f),text:f},/{{[^}]+}}/.test(f)&&u.push(d)}else{for(var p=0;p<d.directive.length;p++)r.push(d.directive[p]);for(var s=0;s<d.event.length;s++)i.push(d.event[s]);for(var v=0;v<d.component.length;v++)a.push(d.component[v]);for(var y=0;y<d.textBind.length;y++)u.push(d.textBind[y])}d.tagName&&a.push(d),o.appendChild(d.el)}return{el:o,directive:r,textBind:u,event:i,component:a}}var m=function(e,t){for(var n=0;n<t.length;n++){var o=t[n].text.replace(/{{[^}]+}}/g,(function(t){return p(e,t.replace("{{","").replace("}}",""))})),r=document.createTextNode(o);t[n].el.parentNode.replaceChild(r,t[n].el),t[n].el=r}},b=function(e,t,n){for(var r=0;r<t.length;r++){var i=t[r],u=e.$directive[i.name];if(!u)throw new Error("The directive is not registered:v-"+i.name);o(u[n])&&u[n].call(u,i.el,{value:p(e,i.value),arg:i.value,target:e})}};function g(e){return function(t){return function e(t,n){for(var o,r=t.childNodes,a=[],c=0;c<r.length;c++)null===(o=r[c])||"object"!==(void 0===o?"undefined":_typeof(o))||3!==o.nodeType||i(o)?u(r[c])&&a.push(e(r[c],n)):a.push(r[c].textContent);for(var l={},d=0;d<t.attributes.length;d++)l[t.attributes[d].nodeName]=t.attributes[d].nodeValue;return n(t.tagName,l,a)}(function(e){if(u(e))return e;var t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}(e),t)}}function _(e){if(!(this instanceof _))throw new Error("Abandon is a constructor and should be called with the `new` keyword");this._lifecycle(e.beforeCreate),this._init(e),this._lifecycle("created"),u(this.el)&&(this._lifecycle("beforeMount"),this._mount(this.el),this._lifecycle("mounted"))}!function(e){e.prototype._init=function(t){var n=this;if(t.router){if(1!==r)throw new Error("Only the root node can configure and enable router！");var i=this;e.prototype.$router={states:[],reload:function(){console.log(i.$router.states)},push:function(e){i.$router.states.push(e),i.$router.reload()},pop:function(){i.$router.states.pop(),i.$router.reload()},goto:function(e){n.$router.states[n.$router.states.length]=e,i.$router.reload()}}}for(var u in this.$uid=r++,t=t||{}){if(/^[_$]/.test(u))throw new Error("The beginning of _and $is not allowed："+u);this[u]=t[u]}o(this.data)&&(this.data=this.data())}}(_),function(e){e.prototype._bind=function(e,t,n){var o=this,r=n.replace(/\([^)]{0,}\)/,"");a(e,t,(function(){o.methods[r].apply(o)}))}}(_),function(e){e.prototype._lifecycle=function(e){if(o(e))e();else if(["created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed"].indexOf(e)>-1&&o(this[e])&&this[e].call(this),1===this.$uid&&"mounted"===e)for(var t=(window.location.href+"#").split(/#\/{0,1}/)[1].replace(/\?.{0,}/,"").split("/"),n=0;n<t.length;n++)this.$router.push(t[n])}}(_),function(e){e.prototype._mountComponent=function(e){var t=this.render(y),n=t.el;this.el.parentNode.replaceChild(n,this.el),this.el=n,this.$directiveE=t.directive,this.$textBindE=t.textBind,m(this,this.$textBindE),b(this,this.$directiveE,"inserted"),function(e){var t=function(t){var n=p(e.data,t);Object.defineProperty(e.data,t,{get:function(){return n},set:function(t){e._lifecycle("beforeUpdate"),n=t,e._updateComponent(),e._lifecycle("updated")}})};for(var n in e.data)t(n)}(this);for(var o=0;o<t.event.length;o++)this._bind(t.event[o].el,t.event[o].name.replace(/^@/,""),t.event[o].value);t.tagName&&/^ui\-/.test(t.tagName)&&(t.component=[{el:t.el,tagName:t.tagName,attrs:t.attrs}]);for(var r=0;r<t.component.length;r++){var i=this.$component[t.component[r].tagName.replace(/^ui\-/,"")];if(!i)throw new Error("The component is not registered:"+t.component[r].tagName);if(i.el=t.component[r].el,Array.isArray(i.props)){for(var u={},a=0;a<i.props.length;a++)v(u,i.props[a],p(t.component[a].attrs,i.props[a]));i.props=u}this._new(i).$pid=this.$uid}},e.prototype._updateComponent=function(){m(this,this.$textBindE),b(this,this.$directiveE,"update")}}(_);var w={inserted:function(e,t){e.value=t.value,a(e,"input",(function(){v(t.target,t.arg,e.value)}))},update:function(e,t){e.value=t.value}};!function(e){e.prototype.$directive={},e.directive=function(t,n){if(e.prototype.$directive[t])throw new Error("The directive has already been defined:v-"+t);e.prototype.$directive[t]=n},e.prototype.$component={},e.component=function(t,n){if(e.prototype.$component[t])throw new Error("The component has already been defined:ui-"+t);e.prototype.$component[t]=n},e.prototype._new=function(t){return new e(t)}}(_),_.directive("bind",{inserted:function(e,t){e.value=e.textContent=t.value},update:function(e,t){e.value=e.textContent=t.value}}),_.directive("model",w),_.component("component",{template:"<div>动态组件开发中</div>",created:function(){}}),_.component("router",{template:"<div>路由开发中</div>",created:function(){}}),_.prototype._mount=function(e){if(!o(this.render)){var t=this.template;t&&h(t)||(t=function(e){if(e.outerHTML)return e.outerHTML;var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}(e)),this.render=g(t)}this._mountComponent(e)},"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?module.exports=_:window.Abandon=_}();