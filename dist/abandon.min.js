"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};
/*!
* abandon v1.1.0
* (c) 2007-2019 心叶 git+https://github.com/yelloxing/abandon.git
* License: MIT
*/!function(){var e=Object.prototype.toString;function t(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":e.call(t)}function n(e){var t=void 0===e?"undefined":_typeof(e);return null!=e&&("object"===t||"function"===t)}function o(e){if(!n(e))return!1;var o=t(e);return"[object Function]"===o||"[object AsyncFunction]"===o||"[object GeneratorFunction]"===o||"[object Proxy]"===o}var r=1;function i(e){if(null===e||"object"!==(void 0===e?"undefined":_typeof(e))||"[object Object]"!=t(e))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var n=e;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}function a(e){return null!==e&&"object"===(void 0===e?"undefined":_typeof(e))&&(1===e.nodeType||9===e.nodeType||11===e.nodeType)&&!i(e)}function u(e,t,n){window.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n,!1)}function c(e){var n=void 0===e?"undefined":_typeof(e);return"symbol"===n||"object"===n&&null!==e&&"[object Symbol]"===t(e)}function l(e,t){return Array.isArray(e)?e:function(e,t){if(Array.isArray(e))return!1;var n=void 0===e?"undefined":_typeof(e);return!("number"!=n&&"boolean"!=n&&null!=e&&!c(e))||(null!==t&&e in Object(t)||/^\w*$/.test(e))}(e,t)?[e]:function(e){return e.replace(/\[/g,".").replace(/\]/g,"").replace(/"/g,"").replace(/'/g,"").split(".")}(e)}var d=1/0;function p(e){if("string"==typeof e||c(e))return e;var t=""+e;return"0"===t&&1/e==-d?"-0":t}function f(e,t,n){var o=null==e?void 0:function(e,t){t=l(t,e);for(var n=0;n<t.length&&null!==e;n++)e=e[p(t[n])];return n&&n===t.length?e:void 0}(e,t);return void 0===o?n:o}function s(e,t,n){!function(e,t,n){"__proto__"==t?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}(e,t,n)}function v(e,t,o,r){return r="function"==typeof r?r:void 0,null==e?e:function(e,t,o,r){if(!n(e))return e;t=l(t,e);for(var i=e,a=0;a<t.length;a++){var u=p(t[a]),c=o;if(a+1!=t.length){var d=i[u];n(d)?c=d:void 0===(c=r?r(d,u,i):void 0)&&(c={})}s(i,u,c),i=i[u]}return e}(e,t,o,r)}function h(e){var n=void 0===e?"undefined":_typeof(e);return"string"===n||"object"===n&&null!=e&&!Array.isArray(e)&&"[object String]"===t(e)}function m(e,t,n){var o=document.createElement(e),r=[],i=[],a=[],u=[],c=[];if(/ui\-/.test(e.toLowerCase()))return{el:o,tagName:e.toLowerCase(),attrs:t,directive:[],textBind:[],event:[],component:[],dynamicComponent:[]};for(var l in"component"==e.toLowerCase()&&(n=[],c.push({el:o})),t=t||{})/^v-/.test(l)?r.push({el:o,name:l.replace("v-",""),value:t[l]}):/^@/.test(l)?i.push({el:o,name:l,value:t[l]}):o.setAttribute(l,t[l]);n=n||[];for(var d=0;d<n.length;d++){var p=n[d];if(h(p)){var f=p;p={el:document.createTextNode(f),text:f},/{{[^}]+}}/.test(f)&&a.push(p)}else{for(var s=0;s<p.directive.length;s++)r.push(p.directive[s]);for(var v=0;v<p.event.length;v++)i.push(p.event[v]);for(var m=0;m<p.component.length;m++)u.push(p.component[m]);for(var y=0;y<p.dynamicComponent.length;y++)c.push(p.dynamicComponent[y]);for(var b=0;b<p.textBind.length;b++)a.push(p.textBind[b])}p.tagName&&u.push(p),o.appendChild(p.el)}return{el:o,directive:r,textBind:a,event:i,component:u,dynamicComponent:c}}var y=function(e,t){for(var n=0;n<t.length;n++){var o=t[n].text.replace(/{{[^}]+}}/g,(function(t){return f(e,t.replace("{{","").replace("}}",""))})),r=document.createTextNode(o);t[n].el.parentNode.replaceChild(r,t[n].el),t[n].el=r}},b=function(e,t,n){for(var r=0;r<t.length;r++){var i=t[r],a=(i.name+":").split(":"),u=e.$directive[a[0]];if(!u)throw new Error("The directive is not registered:v-"+i.name);o(u[n])&&u[n].call(u,i.el,{value:f(e,i.value),arg:i.value,type:a[1],target:e})}},g=function(e,t,n){for(var o=0;o<t.length;o++){var r=t[o];if(n||r.el._dynamic_component_!=r.el.getAttribute("is")){r.el._dynamic_component_=r.el.getAttribute("is"),r.el.innerHTML="<i></i>";var i=r.el.firstElementChild,a=e.$component[r.el._dynamic_component_];a.el=i,e._new(a)}}};function _(e){return function(t){return function e(t,n){for(var o,r=t.childNodes,u=[],c=0;c<r.length;c++)null===(o=r[c])||"object"!==(void 0===o?"undefined":_typeof(o))||3!==o.nodeType||i(o)?a(r[c])&&u.push(e(r[c],n)):u.push(r[c].textContent);for(var l={},d=0;d<t.attributes.length;d++)l[t.attributes[d].nodeName]=t.attributes[d].nodeValue;return n(t.tagName,l,u)}(function(e){if(a(e))return e;var t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}(e),t)}}function w(e){if(!(this instanceof w))throw new Error("Abandon is a constructor and should be called with the `new` keyword");this._lifecycle(e.beforeCreate),this._init(e),this._lifecycle("created"),a(this.el)&&(this._lifecycle("beforeMount"),this._mount(this.el),this._lifecycle("mounted"))}!function(e){e.prototype._init=function(e){for(var t in this.$uid=r++,e=e||{}){if(/^[_$]/.test(t))throw new Error("The beginning of _and $is not allowed："+t);this[t]=e[t]}o(this.data)&&(this.data=this.data())}}(w),function(e){e.prototype._bind=function(e,t,n){var o=this,r=n.replace(/\([^)]{0,}\)/,""),i=n.replace(/[^(]{1,}\({0,1}([^)]{0,})\){0,1}/,"$1").split(",");u(e,t,(function(){o.methods[r].apply(o,i)}))}}(w),function(e){e.prototype._lifecycle=function(e){o(e)?e():["created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed"].indexOf(e)>-1&&o(this[e])&&this[e].call(this)}}(w),function(e){e.prototype._mountComponent=function(e){var t=this.render(m),n=t.el;this.el.parentNode.replaceChild(n,this.el),this.el=n,this.$directiveE=t.directive,this.$textBindE=t.textBind,this.$dynamicComponent=t.dynamicComponent,y(this,this.$textBindE),b(this,this.$directiveE,"inserted"),g(this,this.$dynamicComponent,!0),function(e){var t=function(t){var n=f(e.data,t);Object.defineProperty(e.data,t,{get:function(){return n},set:function(t){e._lifecycle("beforeUpdate"),n=t,e._updateComponent(),e._lifecycle("updated")}})};for(var n in e.data)t(n)}(this);for(var o=0;o<t.event.length;o++)this._bind(t.event[o].el,t.event[o].name.replace(/^@/,""),t.event[o].value);t.tagName&&/^ui\-/.test(t.tagName)&&(t.component=[{el:t.el,tagName:t.tagName,attrs:t.attrs}]);for(var r=0;r<t.component.length;r++){var i=this.$component[t.component[r].tagName.replace(/^ui\-/,"")];if(!i)throw new Error("The component is not registered:"+t.component[r].tagName);if(i.el=t.component[r].el,Array.isArray(i.props)){for(var a={},u=0;u<i.props.length;u++)v(a,i.props[u],f(t.component[u].attrs,i.props[u]));i.props=a}this._new(i).$pid=this.$uid}},e.prototype._updateComponent=function(){y(this,this.$textBindE),b(this,this.$directiveE,"update"),g(this,this.$dynamicComponent)}}(w);var j=function(e,t){t.value&&!h(t.value)&&(t.value=JSON.stringify(t.value)),""==t.type||"value"==t.type?e.value=e.textContent=t.value:e.setAttribute(t.type,t.value)},$={inserted:j,update:j},C={inserted:function(e,t){e.value=t.value,u(e,"input",(function(){v(t.target,t.arg,e.value)}))},update:function(e,t){e.value=t.value}};!function(e){e.prototype.$directive={},e.directive=function(t,n){if(e.prototype.$directive[t])throw new Error("The directive has already been defined:v-"+t);e.prototype.$directive[t]=n},e.prototype.$component={},e.component=function(t,n){if(e.prototype.$component[t])throw new Error("The component has already been defined:ui-"+t);e.prototype.$component[t]=n},e.prototype._new=function(t){return new e(t)}}(w),w.directive("bind",$),w.directive("model",C),w.prototype._mount=function(e){if(!o(this.render)){var t=this.template;t&&h(t)||(t=function(e){if(e.outerHTML)return e.outerHTML;var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}(e)),this.render=_(t)}this._mountComponent(e)},"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?module.exports=w:window.Abandon=w}();